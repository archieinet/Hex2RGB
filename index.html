<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RGB to Hex color conversion [1f4a79]</title>
  </head>
  <link rel="stylesheet" href="/style.css" />
  <body>
    <h1>RGB to Hex color conversion [1f4a79]</h1>
    <div class="container">
      <input type="color" id="colorMe" />
      <a href="https://www.rapidtables.com/convert/color/rgb-to-hex.html">
        RGB & Hex
      </a>
      <ul>
        <li class="box-40"><div class="title">40<br /><p>80% passthrough over white<br /><div id="4c6e94"></div></p></div></li>
        <li class="box-30"><div class="title">30<br /><p>65% passthrough over white<br />#6d89a8</p></div></li>
        <li class="box-20"><div class="title">20<br /><p>35% passthrough over white<br />#b1c0d0</p></div></li>
        <li class="box-10"><div class="title">10<br /><p>15% passthrough over white<br />#dde4eb</p></div></li>
        <li class="box-50"><div class="title">50<br /><p>Primary color<br />#1f4a79</p></div></li>
        <li class="box-60"><div class="title">60<br /><p>60% passthrough over black<br />#193554</p></div></li>
        <li class="box-70"><div class="title">70<br /><p>70% passthrough over black<br />#152434</p></div></li>
        <li class="box-80"><div class="title">80<br /><p>80% passthrough over black<br />#11181f</p></div></li>
      </ul>
    </div>

    <script>
      let input = '#1f4a79';
      const hex = { A: 10, B: 11, C: 12, D: 13, E: 14, F: 15 };
      /* display hex elements */
      //   Object.keys(hex).forEach((k) => {
      //     console.info(`Key: ${k}: Value ${hex[k]}`);
      //   });
      updateBoxes(input);
      convertHexToRGB('#1f4a79'.substring(1).toUpperCase()); //debug - remove
      convertHexToRGB('#193554'.substring(1).toUpperCase()); //debug - remove
      
      /* attach events */
      document.getElementById('colorMe').addEventListener('input', (e) => {
        input = document
          .getElementById('colorMe')
          .value.substring(1)
          .toUpperCase();
        let rgb = convertHexToRGB(input);
        let hex = RGBToHex(rgb[0], rgb[1], rgb[2]);
        updateBoxes(hex); //console.info(hex);
      });

      function convertHexToRGB(input) {
        let switch_cnt = 1;
        let total = 0;
        let index = 0;
        const color = ['Red', 'Green', 'Blue'];
        let rgb = [];

        [...input].forEach((c) => {
          let v = +(isNaN(c) ? hex[c] : c);
          switch (switch_cnt++) {
            case 1:
              total = v * 16;
              break;
            case 2:
              total += v;
              rgb[index++] = total; //console.info(`${color[index++]}: ${total}`);
              switch_cnt = 1;
              break;
            default:
              total = 0;
          }
        });
        console.info(rgb);
        return rgb;
      }

      function convertToHex(v) {
        let hex = v.toString(16);
        return hex.length === 1 ? `0${hex}` : hex;
      }

      function RGBToHex(r, g, b) {
        return `#${convertToHex(r)}${convertToHex(g)}${convertToHex(b)}`;
      }

      function updateBoxes(color) {
        const box = document.querySelector('.box-50');
        box.style.setProperty('--primary-box-color', color);
      }

      function rgbToHsl(r, g, b){
          r /= 255, g /= 255, b /= 255;
          var max = Math.max(r, g, b), min = Math.min(r, g, b);
          var h, s, l = (max + min) / 2;

          if(max == min){
              h = s = 0; // achromatic
          }else{
              var d = max - min;
              s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
              switch(max){
                  case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                  case g: h = (b - r) / d + 2; break;
                  case b: h = (r - g) / d + 4; break;
              }
              h /= 6;
          }
          return [h, s, l];
      }
    </script>
  </body>
</html>
